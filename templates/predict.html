{% extends "master.html" %}

{% block title %}
Predict
{% endblock %}

{% block css %}
<style>
    @-webkit-keyframes outerRotate1 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    @-moz-keyframes outerRotate1 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    @-o-keyframes outerRotate1 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    @keyframes outerRotate1 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    @-webkit-keyframes outerRotate2 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(-360deg);
        }
    }

    @-moz-keyframes outerRotate2 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(-360deg);
        }
    }

    @-o-keyframes outerRotate2 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(-360deg);
        }
    }

    @keyframes outerRotate2 {
        0% {
            transform: translate(-50%, -50%) rotate(0);
        }

        100% {
            transform: translate(-50%, -50%) rotate(-360deg);
        }
    }

    @-webkit-keyframes textColour {
        0% {
            color: #fff;
        }

        100% {
            color: #3BB2D0;
        }
    }

    @-moz-keyframes textColour {
        0% {
            color: #fff;
        }

        100% {
            color: #3BB2D0;
        }
    }

    @-o-keyframes textColour {
        0% {
            color: #fff;
        }

        100% {
            color: #3BB2D0;
        }
    }

    @keyframes textColour {
        0% {
            color: #fff;
        }

        100% {
            color: #3BB2D0;
        }
    }

    html {
        font-size: 62.5%;
    }

    body {
        margin: 0;
        padding: 0;
        font-family: 'Open Sans', sans-serif;
        width: 100vw;
        height: 100vh;
        background: #fff;
    }

    .e-loadholder {
        position: absolute;
        top: 50%;
        left: 37%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        width: 240px;
        height: 240px;
        border: 5px solid #1B5F70;
        border-radius: 120px;
        box-sizing: border-box;
    }

    .hide{
        display: none;
    }

    .e-loadholder:after {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        content: " ";
        display: block;
        background: #fff;
        transform-origin: center;
        z-index: 0;
    }

    .e-loadholder:after {
        width: 100px;
        height: 110%;
        -webkit-animation: outerRotate2 30s infinite linear;
        -moz-animation: outerRotate2 30s infinite linear;
        -o-animation: outerRotate2 30s infinite linear;
        animation: outerRotate2 30s infinite linear;
    }

    .e-loadholder .m-loader {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        width: 200px;
        height: 200px;
        color: #888;
        text-align: center;
        border: 5px solid #2a93ae;
        border-radius: 100px;
        box-sizing: border-box;
        z-index: 20;
        text-transform: uppercase;
    }

    .sec-home-banner .main-desc{
        height: 281px !important;
    }

    .e-loadholder .m-loader:after {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        content: " ";
        display: block;
        background: #fff;
        transform-origin: center;
        z-index: -1;
    }

    .e-loadholder .m-loader:after {
        width: 100px;
        height: 106%;
        -webkit-animation: outerRotate1 15s infinite linear;
        -moz-animation: outerRotate1 15s infinite linear;
        -o-animation: outerRotate1 15s infinite linear;
        animation: outerRotate1 15s infinite linear;
    }

    .e-loadholder .m-loader .e-text {
        font-size: 14px;
        font-size: 1.4rem;
        line-height: 130px;
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        -webkit-animation: textColour 1s alternate linear infinite;
        -moz-animation: textColour 1s alternate linear infinite;
        -o-animation: textColour 1s alternate linear infinite;
        animation: textColour 1s alternate linear infinite;
        display: block;
        width: 140px;
        height: 140px;
        text-align: center;
        border: 5px solid #3bb2d0;
        border-radius: 70px;
        box-sizing: border-box;
        z-index: 20;
    }

    .e-loadholder .m-loader .e-text:before,
    .e-loadholder .m-loader .e-text:after {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        content: " ";
        display: block;
        background: #fff;
        transform-origin: center;
        z-index: -1;
    }

    .e-loadholder .m-loader .e-text:before {
        width: 110%;
        height: 40px;
        -webkit-animation: outerRotate2 3.5s infinite linear;
        -moz-animation: outerRotate2 3.5s infinite linear;
        -o-animation: outerRotate2 3.5s infinite linear;
        animation: outerRotate2 3.5s infinite linear;
    }

    .e-loadholder .m-loader .e-text:after {
        width: 40px;
        height: 110%;
        -webkit-animation: outerRotate1 8s infinite linear;
        -moz-animation: outerRotate1 8s infinite linear;
        -o-animation: outerRotate1 8s infinite linear;
        animation: outerRotate1 8s infinite linear;
    }

    #particleCanvas-White {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        width: 100%;
        height: 50%;
        opacity: 0.1;
    }

    #particleCanvas-Blue {
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-51%, -50%);
        -moz-transform: translate(-51%, -50%);
        -ms-transform: translate(-51%, -50%);
        -o-transform: translate(-51%, -50%);
        transform: translate(-51%, -50%);
        width: 300px;
        height: 300px;
    }
</style>
<style>
    .m-loader span{
        color: #000 !important;
        font-weight: 550;
    }
</style>
{% endblock %}

{% block content %}
<section class="sec-home-banner" id="large-header">
    <canvas id="demo-canvas"></canvas>
    <div class="content">
        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 col-xxl-8">
                    <div class="main-desc my-loader">
                        <p>Welcome, this is where you upload your image or videos for prediction.
                        </p>
                        <ul style="list-style: decimal;">
                            <li>Make sure you have the file on your device in an appropriate place for uploading.</li>
                            <li>Click on the upload file option on the top of the displayed right panel.</li>
                            <li>This should take you to the downloaded folder on your device.</li>
                            <li>Select the file you want to verify.</li>
                            <li>Uploaded files should be posted. If there are any uncertain outcomes in this procedure, ensure these requirements are met.</li>
                            <ul style="list-style:circle;">
                                <li>Your internet connection is stable.</li>
                                <li>Files are completed downloaded and in a compatible format.</li>
                            </ul>
                            <li>Your file should be processed after all requirements are met.</li>
                            <li>The appropriate answer will be displayed below.</li>
                        </ul>
                        If you are facing any issues with these steps, contact us.
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 col-xxl-4">
                    <div class="main-desc">
                        <div class="card">
                            <div class="card-body">

                                <form id="uploadForm" enctype="multipart/form-data">
                                    <div class="mb-3">
                                        <label class="form-label">Upload Image / Video</label><br>
                                        <label class="video-label" for="video" title="Upload File"
                                            style="cursor: pointer;">
                                            <i class="fa-solid fa-cloud-arrow-up" style="font-size:56px"></i>
                                            <p></p>
                                        </label>
                                        <input type="file" name="fileup" id="video" accept="image/*,video/*"
                                            style="display: none;">
                                    </div>

                                    <button class="btn btn-primary sub-video" type="submit"
                                        style="float: right;">Upload</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<!-- <script>
    particlesJS("particleCanvas-Blue", {
        particles: {
            number: {
                value: 100,
                density: {
                    enable: true,
                    value_area: 800
                }
            },
            color: {
                value: "#1B5F70"
            },
            shape: {
                type: "circle",
                stroke: {
                    width: 0,
                    color: "#000000"
                },
                polygon: {
                    nb_sides: 3
                },
                image: {
                    src: "{{ url_for('static',filename='js/custom.js') }}",
                    width: 100,
                    height: 100
                }
            },
            opacity: {
                value: 0.5,
                random: false,
                anim: {
                    enable: true,
                    speed: 1,
                    opacity_min: 0.1,
                    sync: false
                }
            },
            size: {
                value: 10,
                random: true,
                anim: {
                    enable: false,
                    speed: 10,
                    size_min: 0.1,
                    sync: false
                }
            },
            line_linked: {
                enable: false,
                distance: 150,
                color: "#ffffff",
                opacity: 0.4,
                width: 1
            },
            move: {
                enable: true,
                speed: 0.5,
                direction: "none",
                random: true,
                straight: false,
                out_mode: "bounce",
                bounce: false,
                attract: {
                    enable: false,
                    rotateX: 394.57382081613633,
                    rotateY: 157.82952832645452
                }
            }
        },
        interactivity: {
            detect_on: "canvas",
            events: {
                onhover: {
                    enable: true,
                    mode: "grab"
                },
                onclick: {
                    enable: false,
                    mode: "push"
                },
                resize: true
            },
            modes: {
                grab: {
                    distance: 200,
                    line_linked: {
                        opacity: 0.2
                    }
                },
                bubble: {
                    distance: 1500,
                    size: 40,
                    duration: 7.272727272727273,
                    opacity: 0.3676323676323676,
                    speed: 3
                },
                repulse: {
                    distance: 50,
                    duration: 0.4
                },
                push: {
                    particles_nb: 4
                },
                remove: {
                    particles_nb: 2
                }
            }
        },
        retina_detect: true
    });

    particlesJS("particleCanvas-White", {
        particles: {
            number: {
                value: 250,
                density: {
                    enable: true,
                    value_area: 800
                }
            },
            color: {
                value: "#ffffff"
            },
            shape: {
                type: "circle",
                stroke: {
                    width: 0,
                    color: "#000000"
                },
                polygon: {
                    nb_sides: 3
                },
                image: {
                    src: "{{ url_for('static',filename='ball.png') }}",
                    width: 100,
                    height: 100
                }
            },
            opacity: {
                value: 0.5,
                random: true,
                anim: {
                    enable: false,
                    speed: 0.2,
                    opacity_min: 0,
                    sync: false
                }
            },
            size: {
                value: 15,
                random: true,
                anim: {
                    enable: true,
                    speed: 10,
                    size_min: 0.1,
                    sync: false
                }
            },
            line_linked: {
                enable: false,
                distance: 150,
                color: "#ffffff",
                opacity: 0.4,
                width: 1
            },
            move: {
                enable: true,
                speed: 0.5,
                direction: "none",
                random: true,
                straight: false,
                out_mode: "bounce",
                bounce: false,
                attract: {
                    enable: true,
                    rotateX: 3945.7382081613637,
                    rotateY: 157.82952832645452
                }
            }
        },
        interactivity: {
            detect_on: "canvas",
            events: {
                onhover: {
                    enable: false,
                    mode: "grab"
                },
                onclick: {
                    enable: false,
                    mode: "push"
                },
                resize: true
            },
            modes: {
                grab: {
                    distance: 200,
                    line_linked: {
                        opacity: 0.2
                    }
                },
                bubble: {
                    distance: 1500,
                    size: 40,
                    duration: 7.272727272727273,
                    opacity: 0.3676323676323676,
                    speed: 3
                },
                repulse: {
                    distance: 50,
                    duration: 0.4
                },
                push: {
                    particles_nb: 4
                },
                remove: {
                    particles_nb: 2
                }
            }
        },
        retina_detect: true
    });
</script> -->
<script>
    $(document).on('click', '.fa-cloud-arrow-up', function () {
        $('.video-label').find('p').text("");
        $('.video-label').find('i').removeClass("text-success");

    });
    $(document).on('click', '.sub-video', function (e) {
        e.preventDefault();
        
        var check_len = $("#video")[0].files.length;
        if (check_len === 0) {

            Swal.fire({
                icon: 'error',
                title: 'Upload File First',
                text: '',
            })
        }
        else{
            var formData = new FormData($('#uploadForm')[0]);
            $('.my-loader').html('<div class="e-loadholder">\
                <div class="m-loader">\
                    <span class="e-text">Loading</span>\
                </div>\
            </div>');
            // Send AJAX request to Flask server
            $.ajax({
                url: '/upload', // URL for your Flask route that handles the image upload
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                // Handle success response
                    $('.my-loader').html("<h3>"+response+"</h3>");
                    console.log(response);
                },
                error: function(error) {
                // Handle error response
                    $('.my-loader').html("<h3>"+error+"</h3>");
                    
                    console.error("here",error);
                }
            });
            $('.video-label').find('p').text("");
            $('.video-label').find('i').removeClass("text-success");
            $('#video').val('');
        }
    });
    $(document).on('change', '#video', function (e) {
        var filename = $('#video').val().replace(/.*(\/|\\)/, '');
        console.log(filename);
        if (filename) {
            $('.video-label').find('p').text(filename);
            $('.fa-cloud-arrow-up').addClass("text-success");
        }
    });
</script>
{% endblock %}